# ğŸ¯ CRACK Track - Your OSCP Enumeration Superpower

```
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
 â–ˆâ–ˆâ•”â•â•â•â•â•    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â•â•â•â•â•    â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•
 â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
 â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—
 â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—
  â•šâ•â•â•â•â•â•    â•šâ•â•  â•šâ•â•   â•šâ•â•  â•šâ•â•    â•šâ•â•â•â•â•â•    â•šâ•â•  â•šâ•â•

 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
 â•šâ•â•â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â•â•â•â•â•    â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•
    â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
    â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—
    â•šâ•â•      â•šâ•â•  â•šâ•â•   â•šâ•â•  â•šâ•â•    â•šâ•â•â•â•â•â•    â•šâ•â•  â•šâ•â•
```

> **"Never forget a port. Never miss a task. Never lose your notes."** â€” _Every OSCP student who found CRACK Track_

---

## ğŸš€ What is This Wizardry?

**C.R.A.C.K. T.R.A.C.K.**
**C**omprehensive **R**econ & **A**ttack **C**reation **K**it
**T**argeted **R**econnaissance **A**nd **C**ommand **K**onsole

**CRACK Track** is like having a **genius hacker sidekick** who:
- ğŸ“¡ Auto-generates perfect task lists from your nmap scans
- ğŸ§  Remembers EVERYTHING you've tried (even your epic fails)
- ğŸ“ Teaches you the manual way (for when tools fail in the exam)
- ğŸ“ Writes your OSCP report FOR YOU (with sources, because graders are picky)
- ğŸ” Finds that ONE task in your 150+ task tree in 0.1 seconds
- ğŸ® Makes enumeration feel like a guided RPG quest

### ğŸ¯ The TL;DR (Too Long; Didn't Root)

```bash
# One command to rule them all
crack track -i 192.168.45.100

# Watch the magic happen âœ¨
```

**That's it.** You're now in **1nT3R4cT1v3 M0D3** â€” a progressive prompting system that:
- Shows you exactly what to do next
- Lets you search tasks with lightning speed âš¡
- Tracks every finding with timestamps
- Saves your progress automatically
- Makes you look like an enumeration god ğŸ˜

---

## ğŸ® Interactive Mode: The Flagship Experience

**THIS IS THE WAY.** Forget CLI flags and subcommands. Launch interactive mode and let CRACK Track guide you through the enumeration process like a choose-your-own-adventure pentesting book.

### âš¡ Launch Sequence

```bash
# Start fresh
crack track -i 192.168.45.100

# Resume where you left off (because you WILL take breaks)
crack track -i 192.168.45.100 --resume
```

### ğŸ¯ What You'll See

```
======================================================================
Target: 192.168.45.100
Phase: Service-Specific Enumeration
Progress: 12/47 tasks completed (26%)
Last Action: Completed gobuster scan on port 80
Time Elapsed: 01:23:00
======================================================================

What would you like to do?

  1. Import scan results
     â†’ Load nmap/masscan output to auto-generate tasks

  2. Execute next recommended task
     â†’ Directory bruteforce on port 80 (gobuster)

  3. View task tree
     â†’ See all 47 tasks organized by service

  4. Search tasks ğŸ”
     â†’ Find specific tasks by name, port, or tag

  5. Mark task complete
     â†’ Update progress and get new recommendations

Choice [or shortcut]: _
```

### âŒ¨ï¸ Keyboard Shortcuts (Because We're H4CK3RS)

Why type when you can press one key?

| Key | Action | Vibe |
|-----|--------|------|
| `s` | Show full status | "Where am I?" |
| `t` | Task tree display | "Show me the matrix" |
| `r` | Recommendations | "What's next, sensei?" |
| `n` | Execute next task | "Let's DO this" |
| `f` | Search/filter | "Where's that gobuster task?" |
| `alt` | Alternative commands | "Show me manual methods" |
| `h` | Help | "I need an adult" |
| `q` | Quit and save | "I'm out âœŒï¸" |

### ğŸ¨ Alternative Commands: Manual Methods for OSCP Exam

**NEW!** CRACK Track now includes **45+ executable alternative commands** for when automated tools fail (they will in the exam!).

Press **`alt`** in interactive mode to see context-aware manual alternatives for the current task.

```
Current Task: Directory Brute-force (Port 80)
Command: gobuster dir -u http://192.168.45.100:80 -w common.txt

Alternative Commands:

  1. Manual Directory Check
     Use curl to manually test common directories
     Variables: TARGET, PORT, DIRECTORY

  2. Check robots.txt
     Check robots.txt for disallowed paths
     Variables: TARGET, PORT

  3. HTTP Headers Inspection
     Manually inspect HTTP headers for clues
     Variables: TARGET, PORT

Select alternative [1-3]: 1

Preparing: Manual Directory Check
  <TARGET> â†’ 192.168.45.100 (from profile)
  <PORT> â†’ 80 (from task metadata)
  <DIRECTORY> â†’ Enter value: admin

Final command: curl http://192.168.45.100:80/admin

Execute? [Y/n]: y
```

#### Key Features

- **Config-Aware Auto-Fill**: Variables auto-fill from `~/.crack/config.json`
  - `<LHOST>` â†’ Your attacking IP (auto-detected)
  - `<LPORT>` â†’ Your listening port (default: 4444)
  - `<TARGET>` â†’ Current target IP from profile

- **Context-Aware Wordlist Selection**: Different wordlists for different purposes
  - **Web enumeration** â†’ `/usr/share/wordlists/dirb/common.txt`
  - **Password cracking** â†’ `/usr/share/wordlists/rockyou.txt`
  - **SSH brute-force** â†’ `/usr/share/seclists/.../ssh-passwords.txt`
  - **Subdomain enum** â†’ `/usr/share/seclists/.../subdomains-top1million.txt`

- **Task-Linked Alternatives**: Each task shows relevant alternatives
  - **gobuster tasks** â†’ curl manual check, robots.txt, sitemap.xml
  - **nikto tasks** â†’ manual vulnerability testing
  - **hydra tasks** â†’ manual authentication testing

- **Pattern-Based Auto-Discovery**: Alternatives auto-link via smart matching
  - Task ID patterns (`gobuster-*` â†’ http alternatives)
  - Service types (`http` â†’ web testing alternatives)
  - OSCP tags (`OSCP:HIGH` â†’ prioritized alternatives)

#### Quick Setup

```bash
# Auto-detect your attacking IP
crack reference --config auto

# Or manually set config variables
crack reference --set LHOST 192.168.45.200
crack reference --set LPORT 4444
crack reference --set WORDLIST /usr/share/wordlists/dirb/common.txt

# View current config
crack reference --config list
```

#### Usage in Interactive Mode

```bash
# Launch interactive mode
crack track -i 192.168.45.100

# Navigate to any task
# Press 'alt' to see alternatives

# System shows context-aware alternatives for current task
# Variables auto-fill from task metadata, profile, and config
# User only enters values that can't be auto-detected

# Command executes and logs to profile
```

#### Alternative Command Categories

| Category | Count | Example |
|----------|-------|---------|
| Web Enumeration | 10+ | Manual dir check, robots.txt, headers |
| Privilege Escalation | 10+ | SUID binaries, sudo -l, capabilities |
| File Transfer | 10+ | Python HTTP server, wget, curl, nc |
| Anti-Forensics | 10+ | Clear history, log deletion, timestomp |
| Database Enum | 10+ | MySQL version, table enum, user dump |
| Network Recon | 10+ | Netcat port check, banner grab, ping |
| **Total** | **45+** | **Growing library** |

**Full guide**: `crack/track/alternatives/README.md`

### ğŸ” The Search System: Finding Needles in 150-Task Haystacks

Got 100+ tasks? No problem. CRACK Track has **instant search** that would make Google jealous.

```
Search for: gobuster

Found 3 tasks matching 'gobuster':

  1. [â³] Directory Bruteforce - Port 80
     Command: gobuster dir -u http://192.168.45.100 -w common.txt
     Tags: OSCP:HIGH, QUICK_WIN

  2. [â³] Directory Bruteforce - Port 8080
     Command: gobuster dir -u http://192.168.45.100:8080 -w common.txt
     Tags: OSCP:HIGH

  3. [âœ“] API Endpoint Discovery - Port 443
     Command: gobuster dir -u https://192.168.45.100/api -w api.txt
     Status: Completed

Execute task, mark complete, or view details? [1-3/m/v/b]: _
```

**Search by anything:**
- Task name: `gobuster`, `nikto`, `enum4linux`
- Port: `445`, `80`, `3306`
- Tags: `QUICK_WIN`, `OSCP:HIGH`, `MANUAL`
- Service: `http`, `smb`, `sql`

**Results in <100ms** even with 150+ tasks. Yeah, we benchmarked it. ğŸ˜

### ğŸ¯ Context-Aware Menus

CRACK Track adapts to YOUR situation:

**No ports found yet?**
```
Looks like we need to scan first! ğŸ”

Choose your scan strategy:
  1. Quick Scan (Top 1000 Ports) - Lab optimized, 1-2 minutes
  2. Full Port Scan (All 65535) - OSCP critical, 5-10 minutes
  3. Stealth Scan (Polite - T2) - Production systems, 15-20 minutes
  4. Aggressive Full Scan - Maximum speed/features, 10-15 minutes
  5. Custom scan command - Enter your own nmap flags
  6. Import existing scan

ğŸ’¡ Profiles are dynamic! CrackPot agent can mine new scan strategies.
```

**Found HTTP on port 80?**
```
Web server detected! Time to enumerate ğŸ•¸ï¸

  1. Technology fingerprinting (whatweb) - QUICK_WIN âš¡
  2. Directory bruteforce (gobuster)
  3. Vulnerability scan (nikto)
  4. Manual checks (robots.txt, sitemap.xml)
```

**Found vulnerabilities?**
```
Boom! ğŸ’¥ You found 3 vulnerabilities

  1. Document findings with sources
  2. Research exploits (searchsploit)
  3. Attempt exploitation
  4. Export findings to report
```

### ğŸ’¾ Session Persistence: Never Lose Progress

Every action auto-saves to `~/.crack/sessions/`. Power outage? Kernel panic? Rage quit? **No problem.**

```bash
# Next day, resume exactly where you left off
crack track -i 192.168.45.100 --resume

# Output:
# âœ“ Restored session from 2025-10-08 14:23:00
# âœ“ Last action: Completed SMB enumeration
# âœ“ Continue from service-specific phase
```

Your profile, tasks, findings, and notes are **ALWAYS** saved.

---

## ğŸ¨ Dynamic Scan Profiles: Adaptive Scanning Strategies

**NEW!** CRACK Track now features a **dynamic scan profile system** that adapts to your environment and can be extended by the CrackPot agent.

### ğŸš€ What Are Scan Profiles?

Instead of hardcoded scan commands, CRACK Track uses **modular scan strategies** defined in `track/data/scan_profiles.json`:

```json
{
  "id": "lab-full",
  "name": "Full Port Scan (All 65535)",
  "base_command": "nmap -p-",
  "timing": "aggressive",
  "use_case": "OSCP labs - comprehensive port discovery",
  "estimated_time": "5-10 minutes",
  "detection_risk": "medium",
  "tags": ["OSCP:HIGH", "LAB", "THOROUGH"]
}
```

### ğŸ“¦ Built-In Profiles

| Profile | Use Case | Speed | Stealth | OSCP? |
|---------|----------|-------|---------|-------|
| `lab-quick` | Top 1000 ports | âš¡âš¡âš¡ | ğŸ¥· | âœ… HIGH |
| `lab-full` | All 65535 ports | âš¡âš¡ | ğŸ¥· | âœ… CRITICAL |
| `stealth-slow` | Paranoid (-T0) | ğŸŒ | ğŸ¥·ğŸ¥·ğŸ¥· | ğŸ¢ Production |
| `stealth-normal` | Polite (-T2) | âš¡ | ğŸ¥·ğŸ¥· | ğŸ¢ Production |
| `aggressive-full` | Maximum speed (-T4) | âš¡âš¡âš¡ | ğŸ’¥ | âœ… Labs only |
| `udp-common` | UDP scan (top 100) | âš¡âš¡ | ğŸ¥· | âœ… MEDIUM |

### ğŸ¯ Profile Features

Each profile includes:
- **Flag explanations** - Learn what every nmap flag does
- **Success indicators** - Know when scan worked correctly
- **Failure indicators** - Troubleshoot common issues
- **Next steps** - What to do after scan completes
- **Alternatives** - Manual methods for exam scenarios
- **Detection risk warnings** - Know when scan is noisy

### ğŸ’¡ Environment-Aware Selection

```bash
# Set target environment (affects which profiles are shown)
crack track set-environment 192.168.45.100 lab

# Lab environment shows: lab-quick, lab-full, aggressive
# Production environment shows: stealth-slow, stealth-normal
```

### ğŸ¤– Agent-Extensible

The **CrackPot agent** can mine the Nmap cookbook and automatically add new profiles:

```bash
# Agent mines Nmap 6 cookbook Chapter 7
crack agent mine nmap-cookbook --output track/data/scan_profiles.json

# New profiles auto-load next run - no code changes needed!
```

**Coming soon:** Profiles for:
- Fragmentation evasion (`-f`, `--mtu`)
- Decoy scanning (`-D`)
- Source port manipulation (`--source-port`)
- Firewall bypass techniques

### ğŸ® Using Profiles in Interactive Mode

```
Discovery Phase - Choose scan strategy:

  1. Quick Scan (Top 1000 Ports)
     OSCP labs, CTF - fast initial discovery (1-2 minutes)

  2. Full Port Scan (All 65535)
     OSCP labs - comprehensive port discovery (5-10 minutes)
     [OSCP CRITICAL: Always run full port scan]

  3. Stealth Scan (Polite - T2)
     Production systems - moderate stealth (15-20 minutes)

  4. Custom scan command
     Enter your own nmap flags

Choice: 2

Starting Full Port Scan (All 65535)...
Strategy: OSCP labs - comprehensive port discovery
Estimated time: 5-10 minutes

Command: nmap -p- --min-rate 1000 192.168.45.100 -oA lab_full_scan

Flag Explanations:
  -p-: Scan all 65535 TCP ports (thorough, finds unusual high ports)
  --min-rate 1000: Send at least 1000 packets/second (speeds up scan)
  -oA: Save output in all formats (XML, gnmap, nmap)

Execute? [Y/n]: y
```

### ğŸ“ File Structure

```
track/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ scan_profiles.json       # Profile definitions (agent-minable!)
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ scan_profiles.py         # Profile registry
â”‚   â””â”€â”€ command_builder.py       # Modular command composition
â””â”€â”€ interactive/
    â”œâ”€â”€ prompts.py               # Dynamic menu generation
    â””â”€â”€ session.py               # Profile-based scan execution
```

---

## ğŸ—ï¸ Architecture: Event-Driven Plugin Awesomeness

Under the hood, CRACK Track is a **120-plugin** beast powered by an event-driven architecture that would make microservices jealous.

### ğŸ­ The Magic Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  You run nmap   â”‚
â”‚  and import XML â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               EventBus (The Neural Network)             â”‚
â”‚  Emits: service_detected(port=80, service='http')       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ServiceRegistry (The Matchmaker)               â”‚
â”‚  "Which plugin can handle HTTP on port 80?"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”œâ”€â”€> HTTPPlugin.detect() â†’ Confidence: 100
              â”œâ”€â”€> ApachePlugin.detect() â†’ Confidence: 85
              â”œâ”€â”€> NginxPlugin.detect() â†’ Confidence: 70
              â””â”€â”€> GenericWebPlugin.detect() â†’ Confidence: 50
              â”‚
              v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Conflict Resolution (The Judge)               â”‚
â”‚  HTTPPlugin wins with confidence score 100!             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      HTTPPlugin.get_task_tree() (The Generator)         â”‚
â”‚  Creates 15 HTTP enumeration tasks:                     â”‚
â”‚    â”œâ”€â”€ Technology fingerprinting (whatweb)              â”‚
â”‚    â”œâ”€â”€ Directory bruteforce (gobuster)                  â”‚
â”‚    â”œâ”€â”€ Vulnerability scan (nikto)                       â”‚
â”‚    â”œâ”€â”€ Manual checks (robots.txt, sitemap.xml)          â”‚
â”‚    â””â”€â”€ Exploit research (searchsploit Apache 2.4.41)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         TargetProfile (The Memory Bank)                 â”‚
â”‚  Adds tasks to hierarchical tree                        â”‚
â”‚  Checks dependencies                                    â”‚
â”‚  Saves to ~/.crack/targets/192.168.45.100.json          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      RecommendationEngine (The Advisor)                 â”‚
â”‚  Analyzes 15 tasks and recommends:                      â”‚
â”‚    NEXT: whatweb (30 seconds, QUICK_WIN)                â”‚
â”‚    PARALLEL: robots.txt, sitemap.xml (manual checks)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Interactive UI (The Experience)                  â”‚
â”‚  Displays recommendations, waits for your input         â”‚
â”‚  You execute tasks, mark complete, add findings         â”‚
â”‚  Loop continues until you pwn the box ğŸ’€                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ§  Confidence Scoring: No More Duplicate Tasks

**The Old Way (Broken):**
```python
def detect(port_info):
    return True  # Every plugin says yes!
# Result: 5 plugins generate duplicate HTTP tasks ğŸ˜±
```

**The CRACK Track Way (Genius):**
```python
def detect(port_info):
    service = port_info.get('service', '').lower()
    port = port_info.get('port')
    version = port_info.get('version', '').lower()

    # Perfect match: HTTP on port 80
    if service == 'http' and port == 80:
        return 100  # ğŸ¯

    # High confidence: Service mentions HTTP
    if 'http' in service:
        return 90  # ğŸ‘

    # Medium: Common HTTP port
    if port in [80, 443, 8080, 8443]:
        return 60  # ğŸ¤”

    # Low: Port ends with 80
    if str(port).endswith('80'):
        return 30  # ğŸ¤·

    # Nope
    return 0  # ğŸ‘
```

**Winner takes all.** Highest confidence plugin generates tasks. Problem solved. ğŸ†

---

## ğŸš€ Quick Start: Zero to Pwned

### ğŸ¯ The Interactive Way (Recommended for Humans)

```bash
# Launch the experience
crack track -i 192.168.45.100

# Follow the prompts like a boss
# Press 'h' if you get lost
# Press 'q' when you're done (it auto-saves)
```

**Seriously, that's it.** The interactive mode will guide you through:
1. Importing scans
2. Viewing recommendations
3. Executing tasks
4. Documenting findings
5. Exporting reports

### âš™ï¸ The CLI Way (For Automation Addicts)

```bash
# Create target profile
crack track new 192.168.45.100

# Import nmap scan (auto-generates 50+ service-specific tasks)
nmap -sV -sC -p- 192.168.45.100 -oA fullscan
crack track import 192.168.45.100 fullscan.xml

# See recommendations
crack track show 192.168.45.100
# Output:
# ğŸ¯ Next: Technology Fingerprinting (Port 80)
#    Command: whatweb http://192.168.45.100:80 -v
#    Time: ~30 seconds
#
# ğŸš€ Quick Wins (5 tasks):
#   1. whatweb (Port 80)
#   2. robots.txt check
#   3. Anonymous SMB access test
#   4. SSH banner grab
#   5. searchsploit Apache 2.4.41

# Execute task
whatweb http://192.168.45.100:80 -v

# Mark it done
crack track done 192.168.45.100 whatweb-80

# Document findings (OSCP requires sources!)
crack track finding 192.168.45.100 \
  --type vulnerability \
  --description "Directory traversal in /download.php" \
  --source "Manual testing: /download.php?file=../../../../etc/passwd"

# Add credentials
crack track creds 192.168.45.100 \
  --username admin \
  --password "P@ssw0rd123" \
  --service http \
  --port 80 \
  --source "Found in config.php.bak"

# Export OSCP writeup
crack track export 192.168.45.100 > writeup.md
```

---

## ğŸ“ OSCP Exam Superpowers

CRACK Track was built by OSCP students, for OSCP students. Every feature is designed to help you **pass the exam.**

### ğŸ“š Manual Alternatives (For When Tools Fail)

**Every automated task includes manual methods**, because Murphy's Law applies to OSCP exams.

```bash
Task: Directory Bruteforce
Command: gobuster dir -u http://target -w common.txt

Manual Alternatives:
  1. curl http://target/admin
  2. curl http://target/upload
  3. curl http://target/backup
  4. curl http://target/config.php.bak
  5. Browser: View page source, look for commented paths
  6. Browser: Check DevTools â†’ Network tab for API calls

Why This Matters:
  âœ— Gobuster crashes or hangs
  âœ— Wordlist missing
  âœ— WAF blocks automated scanning
  âœ“ Manual testing still works
  âœ“ You pass the exam ğŸ‰
```

### ğŸ”¬ Flag Explanations (Learning Mode)

We explain **every flag** because rote memorization is for robots.

```bash
Command: nmap -sV -sC -p- --min-rate 1000 192.168.45.100 -oA fullscan

Flag Explanations:
  -sV: Service version detection
       â†’ Probes open ports to determine exact service/version
       â†’ Critical for CVE matching
       â†’ Example output: "Apache httpd 2.4.41"

  -sC: Default NSE scripts
       â†’ Runs ~50 safe scripts for common vulnerabilities
       â†’ Finds low-hanging fruit (default creds, misconfigs)
       â†’ Equivalent to --script=default

  -p-: All 65535 ports
       â†’ Don't rely on top 1000 (you'll miss services)
       â†’ OSCP boxes often use non-standard ports
       â†’ Takes longer but finds hidden services

  --min-rate 1000: Send packets at minimum 1000/second
       â†’ Speeds up scans significantly
       â†’ Safe for lab environments
       â†’ Avoid in production (can crash old systems)

  -oA fullscan: Output all formats
       â†’ Creates fullscan.xml, fullscan.nmap, fullscan.gnmap
       â†’ XML for tool imports
       â†’ .nmap for human reading
       â†’ .gnmap for grep parsing
       â†’ ALWAYS use this for OSCP documentation
```

### ğŸ“ Source Tracking (Required for Reports)

OSCP graders WILL ask "how did you find this?" CRACK Track makes you document sources **every time.**

```bash
# âŒ This will fail
crack track finding 192.168.45.100 \
  --type vulnerability \
  --description "SQL injection"

# Error: --source is required for findings

# âœ… This works
crack track finding 192.168.45.100 \
  --type vulnerability \
  --description "SQL injection in id parameter" \
  --source "Manual testing: sqlmap -u 'http://target/page.php?id=1'"

# âœ“ Added finding with source timestamp
# âœ“ Will appear in exported report with full chain
```

### â±ï¸ Timeline Export (Reconstruct Your Attack)

Every action is timestamped. Export a **complete timeline** for your report.

```bash
crack track timeline 192.168.45.100

# Output:
# 2025-10-08 12:00:00 - Created target profile
# 2025-10-08 12:05:00 - Imported nmap scan (3 ports discovered)
# 2025-10-08 12:15:00 - Completed: Technology fingerprinting (Port 80)
# 2025-10-08 12:30:00 - Completed: Directory bruteforce (Port 80)
# 2025-10-08 12:45:00 - Finding: Directory traversal in /download.php
# 2025-10-08 13:00:00 - Finding: LFI allows /etc/passwd read
# 2025-10-08 13:30:00 - Credential: admin / P@ssw0rd123 (config.php.bak)
# 2025-10-08 14:00:00 - Completed: Shell upload via LFI + log poisoning
# 2025-10-08 14:15:00 - Achievement unlocked: Low-privilege shell ğŸ‰
# Total time to initial access: 2 hours 15 minutes
```

Perfect for the "**Proof.txt was located at...**" section. ğŸ“œ

---

## ğŸ”§ Core Commands Cheat Sheet

### ğŸ¯ Target Management

```bash
# Create new target
crack track new <TARGET>

# List all tracked targets
crack track list

# Show target status
crack track show <TARGET>

# Delete target (asks for confirmation)
crack track delete <TARGET>
```

### ğŸ“¥ Data Import

```bash
# Import nmap XML (recommended)
crack track import <TARGET> scan.xml

# Import nmap gnmap
crack track import <TARGET> scan.gnmap

# Supports -oX, -oG, and -oA formats
```

### âœ… Task Management

```bash
# View recommendations
crack track show <TARGET>
crack track recommend <TARGET>

# Mark task complete
crack track done <TARGET> <TASK_ID>

# Search tasks (interactive only)
crack track -i <TARGET>
# Then press 'f' for search

# Add custom task
crack track add-task <TARGET> \
  --name "Check phpinfo.php" \
  --command "curl http://target/phpinfo.php"
```

### ğŸ“ Documentation

```bash
# Add finding (source required!)
crack track finding <TARGET> \
  --type <TYPE> \
  --description "What you found" \
  --source "How you found it"

# Types: vulnerability, directory, user, config, file, etc.

# Add credentials
crack track creds <TARGET> \
  --username <USER> \
  --password <PASS> \
  --service <SERVICE> \
  --port <PORT> \
  --source "Where you found it"

# Add note
crack track note <TARGET> "Your observation"
```

### ğŸ“¤ Export & Reporting

```bash
# Export full OSCP writeup
crack track export <TARGET> > writeup.md

# Export timeline
crack track timeline <TARGET>

# Export task reference (command list only)
crack track export <TARGET> --tasks-only
```

### ğŸ¨ Visualization

```bash
# Master system overview
crack track --viz master

# Plugin flow diagram
crack track --viz plugin-flow

# Task tree for target
crack track <TARGET> --viz task-tree

# Progress bars
crack track <TARGET> --viz progress

# Export to markdown file
crack track --viz master -o architecture.md
```

---

## ğŸ”Œ The Plugin Army: 120+ Automated Specialists

CRACK Track has **120+ service plugins** that auto-generate tasks when services are detected. Here's the roster:

### ğŸŒ Web Application Plugins (40+)

| Plugin | Service | Auto-Generated Tasks |
|--------|---------|---------------------|
| **HTTP/HTTPS** | http, https | whatweb, gobuster, nikto, robots.txt, sitemap.xml |
| **Apache** | apache httpd | Version-specific CVE research, mod_* enumeration |
| **Nginx** | nginx | Config disclosure, version exploits |
| **IIS** | Microsoft IIS | WebDAV, ISAPI, ASP.NET enumeration |
| **Tomcat** | Apache Tomcat | Manager console brute-force, WAR upload |
| **API Attacks** | REST APIs | Endpoint enumeration, auth bypass, parameter fuzzing |
| **WordPress** | WordPress | WPScan, user enum, plugin/theme vulns |
| **Joomla** | Joomla | JoomScan, admin finder |
| **Drupal** | Drupal | Droopescan, version detection |
| **Ruby on Rails** | Rails | Secret token exposure, parameter injection |
| **Python Web** | Flask/Django | Debug mode check, pickle exploits |
| **PHP Attacks** | PHP | LFI, RFI, file upload, PHP info disclosure |
| **File Upload** | upload forms | Extension bypass, MIME type tricks, magic byte |
| **SSRF** | server-side | Cloud metadata, internal port scan |
| **XSS** | reflected/stored | Payload generation, CSP bypass |
| **Auth Bypass** | login forms | Default creds, SQL injection, JWT attacks |

### ğŸ—„ï¸ Database Plugins (15+)

| Plugin | Service | Pwn-ability Level |
|--------|---------|------------------|
| **MySQL** | mysql | UDF privesc, FILE privilege, hash dump | ğŸ”¥ğŸ”¥ğŸ”¥ |
| **PostgreSQL** | postgresql | Copy from program, large object injection | ğŸ”¥ğŸ”¥ |
| **MSSQL** | ms-sql-s | xp_cmdshell, linked servers, injection | ğŸ”¥ğŸ”¥ğŸ”¥ |
| **MongoDB** | mongodb | NoSQL injection, unauthorized access | ğŸ”¥ğŸ”¥ |
| **Redis** | redis | RCE via module load, key enumeration | ğŸ”¥ğŸ”¥ğŸ”¥ |
| **Oracle** | oracle-tns | TNS poisoning, default schema passwords | ğŸ”¥ |

### ğŸ–§ Network Service Plugins (30+)

| Plugin | Service | OSCP Relevance |
|--------|---------|---------------|
| **SMB** | smb/smb2 | enum4linux, null sessions, EternalBlue | â­â­â­ |
| **SSH** | ssh | User enum, weak keys, version exploits | â­â­ |
| **FTP** | ftp | Anonymous login, writable dirs, vsftpd backdoor | â­â­â­ |
| **NFS** | nfs | no_root_squash, UID spoofing, mount enum | â­â­â­ |
| **SMTP** | smtp | VRFY/EXPN user enum, open relay | â­â­ |
| **DNS** | domain | Zone transfer, subdomain brute-force | â­â­ |
| **SNMP** | snmp | Community string brute-force, OID enum | â­â­â­ |
| **LDAP** | ldap | Anonymous bind, LDAP injection | â­â­ |
| **Kerberos** | kerberos | ASREPRoast, Kerberoasting, golden tickets | â­â­â­ |
| **RDP** | ms-wbt-server | BlueKeep check, session hijacking | â­â­ |

### ğŸªŸ Windows/AD Plugins (20+)

| Plugin | Specialty | ğŸ’€ Factor |
|--------|----------|----------|
| **AD Enumeration** | BloodHound, PowerView | Domain mapping | ğŸ’€ğŸ’€ğŸ’€ |
| **AD Attacks** | Kerberoasting, DCSync | Credential harvesting | ğŸ’€ğŸ’€ğŸ’€ |
| **AD Delegation** | Constrained/unconstrained | Lateral movement | ğŸ’€ğŸ’€ |
| **AD Certificates** | ESC1-8, Certipy | PKI abuse | ğŸ’€ğŸ’€ğŸ’€ |
| **AD Persistence** | Golden ticket, DCShadow | Long-term access | ğŸ’€ğŸ’€ğŸ’€ |
| **Windows PrivEsc** | Token manipulation, UAC bypass | SYSTEM access | ğŸ’€ğŸ’€ğŸ’€ |
| **MSSQL in AD** | Linked servers, impersonation | SQL to DA | ğŸ’€ğŸ’€ğŸ’€ |

### ğŸ§ Linux/Post-Exploit Plugins (15+)

| Plugin | Focus | Critical? |
|--------|-------|----------|
| **Linux Enumeration** | SUID, capabilities, cron, sudoers | âœ… OSCP CORE |
| **Linux PrivEsc** | Kernel exploits, PATH hijack | âœ… OSCP CORE |
| **Linux Capabilities** | cap_setuid, cap_dac_override | âœ… Advanced |
| **Linux Persistence** | SSH keys, cron jobs, systemd | âš ï¸ Post-root |
| **Container Escape** | Docker, LXC, Kubernetes | ğŸ”¥ Advanced |
| **macOS Enumeration** | TCC bypass, dylib injection | ğŸ Mac-specific |
| **macOS PrivEsc** | AuthorizationPlugin, XPC | ğŸ Mac-specific |

### ğŸ”’ Binary Exploitation Plugins (10+)

| Plugin | Technique | OSCP Level |
|--------|-----------|------------|
| **Stack Buffer Overflow** | EIP control, DEP/ASLR bypass | âœ… Required |
| **Heap Exploitation** | Use-after-free, double-free | âŒ Beyond OSCP |
| **Format String** | Arbitrary read/write | âš ï¸ Rare in OSCP |
| **ROP Chains** | Return-oriented programming | âŒ Beyond OSCP |
| **ARM Exploitation** | ARM assembly, Thumb mode | âŒ Specialized |

### ğŸ­ Specialty Plugins (10+)

- **Phishing** - Office macros, HTA, SCF files
- **C2 Analysis** - Beacon detection, traffic analysis
- **Anti-Forensics** - Log deletion, timestomping
- **Cryptography** - Weak ciphers, ECB mode, padding oracle
- **Hardware** - UART, JTAG, SPI, I2C
- **Radio** - SDR, RFID, NFC
- **Blockchain** - Smart contract auditing
- **AI Security** - LLM prompt injection, model poisoning
- **Mobile** - Android/iOS app security
- **OSINT** - Recon, WHOIS, social media

**Total: 120+ plugins** ğŸ‰ (and growing!)

---

## ğŸ“Š Real Example: OSCP Lab Box Workflow

Let's pwn a box from start to finish with CRACK Track:

### ğŸ¯ Scenario: 192.168.45.100 (Linux Web Server)

```bash
# ========== PHASE 1: DISCOVERY ==========

# Launch interactive mode
crack track -i 192.168.45.100

# Menu appears:
# "No ports discovered yet. Let's scan!"
#   1. Quick scan (top 1000 ports)
#   2. Full scan (all 65535 ports)
#   3. Import existing scan

# You choose: 2 (Full scan recommended for OSCP)

# In another terminal:
nmap -p- --min-rate 1000 192.168.45.100 -oA discovery
nmap -sV -sC -p 22,80,445 192.168.45.100 -oA services

# Back in interactive mode:
# Press '1' to import scan
# Select: services.xml

# âœ“ Imported 3 open ports
# âœ“ Generated 47 enumeration tasks
# âœ“ Progressed to service-specific phase

# ========== PHASE 2: SERVICE ENUMERATION ==========

# Menu now shows:
# "3 services detected! Quick wins available ğŸš€"
#
# Quick Wins (5 tasks):
#   1. whatweb (Port 80) - 30 seconds
#   2. robots.txt check (Port 80) - 5 seconds
#   3. Anonymous SMB (Port 445) - 10 seconds
#   4. SSH banner grab (Port 22) - 5 seconds
#   5. searchsploit Apache 2.4.41 - 2 minutes

# Press 'n' (Execute next)
# CRACK Track runs: whatweb http://192.168.45.100:80 -v

# Output shows:
# Apache 2.4.41, PHP 7.4.3, WordPress 5.8.1

# Auto-marks task complete
# Shows new menu:
#
# "WordPress detected! ğŸ¯"
#   1. WPScan enumeration
#   2. WordPress user enumeration
#   3. Continue HTTP enumeration
#   4. Check other services

# You press 'f' to search for tasks
# Type: "robots"

# Found: Check robots.txt (Port 80)
# Execute? [y/n]: y

# You run: curl http://192.168.45.100/robots.txt
# Output shows: Disallow: /admin-panel

# Document finding:
# Press 'd' (Document finding)
# Type: directory
# Description: Found /admin-panel via robots.txt
# Source: Manual curl request to robots.txt

# âœ“ Finding saved with timestamp

# Press 'f' to search again
# Type: "gobuster"

# Found: Directory Bruteforce (Port 80)
# Execute? [y/n]: y

# You run: gobuster dir -u http://192.168.45.100 -w common.txt

# Results:
# /admin-panel (200)
# /backup (301)
# /uploads (200)

# Document all findings:
# Press 'd' three times with details

# ========== PHASE 3: EXPLOITATION ==========

# You browse to /backup
# Find: config.php.bak

# Download and find credentials:
# Username: admin
# Password: SuperS3cr3t!

# Document credentials:
# Press 'c' (Add credentials)
# Username: admin
# Password: SuperS3cr3t!
# Service: wordpress
# Port: 80
# Source: Found in /backup/config.php.bak

# âœ“ Credentials saved

# Test credentials on /admin-panel â†’ Success! ğŸ‰
# WordPress admin panel accessed

# Upload reverse shell via plugin upload
# Get shell as www-data

# ========== PHASE 4: POST-EXPLOITATION ==========

# CRACK Track detects phase change
# Menu now shows:
#
# "Shell access detected! ğŸŠ"
#   1. Linux privilege escalation enumeration
#   2. Search for SUID binaries
#   3. Check sudo permissions
#   4. Enumerate capabilities
#   5. Look for kernel exploits

# Press 'n' (Execute next)
# Runs: find / -perm -u=s -type f 2>/dev/null

# Finds unusual SUID binary: /usr/local/bin/backup

# Test binary â†’ Vulnerable to path hijacking!

# Press 'd' to document vulnerability
# Type: privilege_escalation
# Description: SUID binary /usr/local/bin/backup vulnerable to PATH hijack
# Source: Manual testing + GTFOBins research

# Exploit it â†’ Root shell! ğŸ’€

# ========== PHASE 5: REPORTING ==========

# Press 'q' to quit interactive mode
# Export full report:
crack track export 192.168.45.100 > 192.168.45.100-writeup.md

# View timeline:
crack track timeline 192.168.45.100

# Output shows complete attack chain:
# 12:00 - Created profile
# 12:05 - Imported nmap scan
# 12:15 - Discovered WordPress
# 12:30 - Found /admin-panel via robots.txt
# 12:45 - Found credentials in config.php.bak
# 13:00 - Gained shell via plugin upload
# 13:15 - Discovered SUID binary
# 13:30 - Achieved root access
# Total time: 1 hour 30 minutes
```

**Result:** Complete OSCP-ready writeup with:
- âœ… All commands executed (with flag explanations)
- âœ… All findings documented (with sources)
- âœ… All credentials tracked (with locations)
- âœ… Complete timeline (for report)
- âœ… Manual alternatives (for exam)
- âœ… Proof screenshots (you took them, right? ğŸ“¸)

---

## ğŸ§ª Testing: 75% Coverage on Critical Features

CRACK Track has **comprehensive tests** focused on **user value**, not just code coverage.

### ğŸ“ˆ Test Stats

```
Total Tests: 87
âœ… Passing: 87 (100%)
ğŸ“Š Coverage: 75% (critical features)
âš¡ Speed: <5 seconds (full suite)
```

### ğŸ¯ Test Categories

**Interactive Mode Tests** (`test_interactive_search.py`):
- 21 test methods
- Proves search finds tasks in <100ms with 150+ tasks
- Validates filter by status, tag, port
- Tests case-insensitive partial matching
- Ensures users can act on search results

**Core Architecture Tests** (`test_core_improvements.py`):
- 15 test methods
- Task dependency validation (no executing out of order)
- Plugin conflict resolution (highest confidence wins)
- Circular dependency detection
- Confidence scoring (0-100 scale)

**Visualizer Tests** (`test_visualizer.py`):
- 12 test methods
- Master view rendering
- Plugin flow diagrams
- Task tree display
- Progress tracking

### ğŸ† Test Philosophy

```python
# âœ… Good Test - Proves USER VALUE
def test_user_finds_gobuster_quickly():
    """
    PROVES: User searching for 'gobuster' finds all gobuster tasks

    Real scenario: OSCP exam, multiple web ports, user wants
    to find all gobuster commands across ports 80, 443, 8080.
    """
    session = InteractiveSession("192.168.45.100")

    # Add gobuster tasks on multiple ports
    # ... setup ...

    results = session.search_tasks('gobuster')

    # User gets ALL gobuster tasks
    assert len(results) == 3

    # Search completes in <100ms (performance matters!)
    assert search_time < 0.1

# âŒ Bad Test - Tests MOCKS, not REALITY
def test_search_calls_method(mocker):
    """This doesn't prove the feature WORKS for users"""
    mock_search = mocker.patch('session.search_tasks')
    # This tests the mock, not real behavior!
```

**Run Tests:**
```bash
# All tests
pytest crack/tests/track/ -v

# Specific category
pytest crack/tests/track/test_interactive_search.py -v

# With coverage
pytest crack/tests/track/ --cov=crack.track --cov-report=term-missing

# Fast tests only
pytest crack/tests/track/ -m "not slow"
```

---

## ğŸ“ Storage: Where Your Data Lives

Everything is stored in **human-readable JSON** at `~/.crack/`:

```bash
~/.crack/
â”œâ”€â”€ targets/                    # Target profiles
â”‚   â”œâ”€â”€ 192.168.45.100.json    # Full enumeration state
â”‚   â”œâ”€â”€ 192.168.45.101.json
â”‚   â””â”€â”€ 192.168.45.102.json
â”œâ”€â”€ sessions/                   # Interactive mode sessions
â”‚   â”œâ”€â”€ 192.168.45.100.json    # Resume points
â”‚   â””â”€â”€ 192.168.45.101.json
â””â”€â”€ config.json                 # Global settings

# Profile format (192.168.45.100.json):
{
  "target": "192.168.45.100",
  "created": "2025-10-08T12:00:00",
  "updated": "2025-10-08T14:30:00",
  "phase": "exploitation",
  "status": "in-progress",

  "ports": {
    "80": {
      "state": "open",
      "service": "http",
      "version": "Apache httpd 2.4.41",
      "source": "nmap service scan"
    }
  },

  "findings": [
    {
      "timestamp": "2025-10-08T13:00:00",
      "type": "directory",
      "description": "Found /admin-panel via robots.txt",
      "source": "Manual curl request"
    }
  ],

  "credentials": [
    {
      "timestamp": "2025-10-08T13:30:00",
      "username": "admin",
      "password": "SuperS3cr3t!",
      "service": "wordpress",
      "port": 80,
      "source": "config.php.bak in /backup"
    }
  ],

  "task_tree": {
    "id": "root",
    "name": "Enumeration: 192.168.45.100",
    "children": [ /* 47 tasks */ ]
  }
}
```

**Why JSON?**
- âœ… Human-readable (can edit manually if needed)
- âœ… Git-friendly (track changes to profiles)
- âœ… Easy to parse (integrate with other tools)
- âœ… Debuggable (cat the file to see what's stored)

---

## ğŸ¤ Contributing: Join the Plugin Army

Want to add a service plugin? We'd love to have you! ğŸ‰

### ğŸ”Œ Creating a Plugin (5 Minutes)

```python
# 1. Create: crack/track/services/your_service.py

from typing import Dict, Any
from .base import ServicePlugin
from .registry import ServiceRegistry

@ServiceRegistry.register  # â† Auto-registers your plugin!
class YourServicePlugin(ServicePlugin):
    """Your service enumeration plugin"""

    @property
    def name(self) -> str:
        return "your-service"

    def detect(self, port_info: Dict[str, Any]) -> float:
        """Return confidence score (0-100)"""
        service = port_info.get('service', '').lower()
        port = port_info.get('port')

        # Perfect match
        if service == 'your-service' and port == 1337:
            return 100

        # High confidence
        if 'your-service' in service:
            return 90

        # No match
        return 0

    def get_task_tree(self, target: str, port: int,
                     service_info: Dict) -> Dict:
        """Generate tasks for this service"""
        return {
            'id': f'your-service-{port}',
            'name': f'Your Service Enumeration (Port {port})',
            'type': 'parent',
            'children': [
                {
                    'id': f'enum-{port}',
                    'name': 'Basic Enumeration',
                    'type': 'command',
                    'metadata': {
                        'command': f'your-tool {target} -p {port}',
                        'description': 'Enumerate your service',
                        'tags': ['OSCP:HIGH', 'QUICK_WIN'],
                        'flag_explanations': {
                            '-p': 'Target port'
                        },
                        'success_indicators': [
                            'Connection successful',
                            'Data enumerated'
                        ],
                        'alternatives': [
                            f'Manual: nc {target} {port}'
                        ]
                    }
                }
            ]
        }

# 2. That's it! No registration needed - the decorator does it!

# 3. Test:
pytest crack/tests/track/ -v -k your_service
```

### ğŸ“‹ Plugin Checklist

- [ ] Implements `detect()` with confidence scoring (0-100)
- [ ] Generates meaningful task tree
- [ ] Includes flag explanations for all commands
- [ ] Provides manual alternatives
- [ ] Lists success/failure indicators
- [ ] Tags tasks appropriately (OSCP:HIGH, QUICK_WIN, etc.)
- [ ] Has tests proving user value
- [ ] Documentation in docstrings

### ğŸ¯ Good Plugin Examples

Check out these for inspiration:
- `services/http.py` - Complex plugin with CMS detection
- `services/smb.py` - Simple but comprehensive
- `services/ssh.py` - Good use of version-specific tasks

---

## ğŸ“ Philosophy: OSCP Success Over Tool Dependency

**CRACK Track teaches methodology, not memorization.**

### ğŸ¯ Design Principles

1. **Manual alternatives for everything**
   - Tools fail in exams
   - Manual methods always work
   - You learn the WHY, not just the HOW

2. **Source tracking is mandatory**
   - OSCP graders demand proof
   - "I used gobuster" â†’ âŒ
   - "gobuster with common.txt wordlist found /admin at 12:45" â†’ âœ…

3. **Flag explanations everywhere**
   - Don't blindly run commands
   - Understand what each flag does
   - Adapt when default doesn't work

4. **Time awareness**
   - OSCP exam is 24 hours
   - Quick wins tagged clearly
   - Time estimates on tasks
   - Timeline shows where time was spent

5. **Progressive disclosure**
   - Don't overwhelm with 150 tasks at once
   - Show top 5 recommendations
   - Let users search for specific tasks
   - Context-aware menus

6. **Session persistence**
   - Exams have breaks
   - Systems crash
   - Always resume where you left off

---

## ğŸš¨ Troubleshooting

### "crack: command not found"

```bash
# Install CRACK toolkit
cd /path/to/crack
pip install -e . --break-system-packages

# Or use reinstall script
./reinstall.sh
```

### "Profile not found"

```bash
# Check existing targets
crack track list

# Create new profile
crack track new 192.168.45.100
```

### "Import fails"

```bash
# Check file format
file scan.xml  # Should say "XML document"

# Try different format
crack track import 192.168.45.100 scan.gnmap
```

### "No tasks generated after import"

```bash
# Ensure service versions were detected
crack track show 192.168.45.100

# If ports show but no versions:
nmap -sV -sC -p 80,445 192.168.45.100 -oA services
crack track import 192.168.45.100 services.xml
```

### "Interactive mode not working"

```bash
# Check Python version (needs 3.8+)
python3 --version

# Reinstall
cd /path/to/crack
./reinstall.sh

# Check logs
crack track -i 192.168.45.100 --debug
```

---

## ğŸ¯ Pro Tips

### ğŸš€ Speed Up Your Workflow

```bash
# Alias for interactive mode
echo "alias ct='crack track -i'" >> ~/.bashrc
source ~/.bashrc

# Now just:
ct 192.168.45.100
```

### ğŸ” Search Like a Boss

- Search for **quick wins** when time-limited: `QUICK_WIN`
- Search by **port** to see all tasks for one service: `445`
- Search by **tool** to find specific commands: `gobuster`
- Search by **phase** tags: `OSCP:HIGH`

### ğŸ“ Document as You Go

**Don't wait until the end!** Document findings immediately:
- Press `d` in interactive mode
- Add sources EVERY time
- Future you will thank present you ğŸ™

### âš¡ Parallel Tasks Save Time

When CRACK Track shows "parallel tasks", **run them simultaneously**:

```bash
# Terminal 1
gobuster dir -u http://target

# Terminal 2
nikto -h http://target

# Terminal 3
curl http://target/robots.txt
```

Mark all complete when done. Saves HOURS on exam day. â°

### ğŸ¯ Quick Win Priority

**Always do quick wins first:**
1. 30 seconds: `whatweb`, `robots.txt`, `sitemap.xml`
2. 2 minutes: `searchsploit` version lookups
3. 5 minutes: Manual checks (default creds, anonymous access)
4. 10+ minutes: Brute-forcing (gobuster, hydra)

Get the low-hanging fruit before running long scans.

---

## ğŸ“š Further Reading

- **Architecture Deep Dive**: `docs/ARCHITECTURE_REVIEW.md`
- **Testing Strategy**: `tests/track/TEST_STRATEGY.md`
- **Plugin Development**: `PLUGIN_CONTRIBUTION_GUIDE.md`
- **Interactive Mode Guide**: `docs/INTERACTIVE_MODE.md` (coming soon)
- **Main CRACK Docs**: `/crack/README.md`

---

## ğŸ‰ The Bottom Line

**CRACK Track** is your enumeration co-pilot for OSCP success:

âœ… **120+ plugins** auto-generate perfect task lists
âœ… **Interactive mode** guides you step-by-step
âœ… **Search system** finds tasks in 150+ task trees instantly
âœ… **Source tracking** builds OSCP reports automatically
âœ… **Manual alternatives** for when tools fail (they will!)
âœ… **Session persistence** so you never lose progress
âœ… **Timeline export** reconstructs your entire attack chain

**No more forgetting tasks. No more lost notes. No more panic.**

Just methodical, documented, successful enumeration. ğŸ¯

---

## ğŸ’¬ Final Words

This tool was built by OSCP students who know the pain of:
- Forgetting which ports you scanned
- Losing track of which wordlists you tried
- Having no idea what you did 3 hours ago
- Frantically writing reports at 2 AM
- Wishing you documented sources for findings

**CRACK Track solves all of that.**

Now go pwn some boxes. ğŸ’€

---

```
 â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘       â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘        â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘        â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘       â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘ 
â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘ 
â–‘â–’â–“â–ˆâ–“â–’â–‘             â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘             â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘ 
â–‘â–’â–“â–ˆâ–“â–’â–‘             â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘       â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘             â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘  
â–‘â–’â–“â–ˆâ–“â–’â–‘             â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘      â–‘â–’â–“â–ˆâ–“â–’â–‘             â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘ 
â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘ 
 â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–ˆâ–“â–’â–‘â–’â–“â–ˆâ–“â–’â–‘â–‘â–’â–“â–ˆâ–“â–’â–‘ 
                                                                                               
                                                                                              

 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
 â•šâ•â•â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•â•â•
    â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•
    â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
    â•šâ•â•      â•šâ•â•  â•šâ•â•   â•šâ•â•â•â•â•â•â•

 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
 â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—   â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â•šâ–ˆâ–ˆâ–ˆâ•”â•
 â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—
 â•šâ•â•â•â•â•â•     â•šâ•â•â•â•â•â•    â•šâ•â•  â•šâ•â•
```

**Part of the CRACK Toolkit** - Comprehensive Recon & Attack Creation Kit
**License**: MIT
**Maintained by**: OSCP students, for OSCP students
**Contributions**: Always welcome! ğŸ¤

ğŸ”— **Report Issues**: https://github.com/CodeBlackwell/Phantom-Protocol/issues
ğŸ“– **Full Docs**: https://github.com/CodeBlackwell/Phantom-Protocol/tree/main/crack/track
â­ **Star Us**: If this saves your OSCP exam, smash that star button!
